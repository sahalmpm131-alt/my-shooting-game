<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KK Mobile Shooter</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; touch-action: none; }
        canvas { display: block; }
        #ui { position: absolute; top: 10px; left: 10px; color: white; font-size: 20px; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui">Score: <span id="score">0</span></div>
    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let score = 0;
    const player = { x: canvas.width/2 - 20, y: canvas.height - 80, w: 40, h: 40, color: '#00dbde' };
    const bullets = [];
    const enemies = [];

    function spawnEnemy() {
        enemies.push({ x: Math.random() * (canvas.width - 30), y: -30, w: 30, h: 30, color: '#fc00ff' });
    }
    setInterval(spawnEnemy, 1000);

    // ഫോണിൽ ടച്ച് ചെയ്യുമ്പോൾ നീങ്ങാനും വെടിവെക്കാനും
    window.addEventListener('touchmove', (e) => {
        e.preventDefault();
        let touch = e.touches[0];
        player.x = touch.clientX - 20;
    }, { passive: false });

    window.addEventListener('touchstart', (e) => {
        bullets.push({ x: player.x + 18, y: player.y, w: 4, h: 10, color: 'yellow' });
    });

    function update() {
        bullets.forEach((b, i) => {
            b.y -= 7;
            if(b.y < 0) bullets.splice(i, 1);
        });
        enemies.forEach((e, ei) => {
            e.y += 3;
            if(e.y > canvas.height) enemies.splice(ei, 1);
            bullets.forEach((b, bi) => {
                if(b.x < e.x + e.w && b.x + b.w > e.x && b.y < e.y + e.h && b.y + b.h > e.y) {
                    enemies.splice(ei, 1);
                    bullets.splice(bi, 1);
                    score += 10;
                    document.getElementById('score').innerText = score;
                }
            });
        });
    }

    function draw() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = player.color;
        ctx.fillRect(player.x, player.y, player.w, player.h);
        bullets.forEach(b => { ctx.fillStyle = b.color; ctx.fillRect(b.x, b.y, b.w, b.h); });
        enemies.forEach(e => { ctx.fillStyle = e.color; ctx.fillRect(e.x, e.y, e.w, e.h); });
    }

    function loop() { update(); draw(); requestAnimationFrame(loop); }
    loop();
</script>
</body>
</html>


